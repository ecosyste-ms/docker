<% @meta_title = "Package Usage Across Docker Images" %>
<% @meta_description = "Explore the latest package usage data across Docker images, including detailed information on package dependencies and their usage." %>

<div class="container-sm">
  <h1>Package Usage Across Docker Images</h1>

  <p class='lead'>
    Explore the latest package usage data across Docker images, including detailed information on package dependencies and their usage.
  </p>

  <ul class="nav nav-tabs my-3">
    <li class="nav-item ms-auto">
      <div class="dropdown">
        <button class="btn btn-light dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
          Sort
        </button>
        <ul class="dropdown-menu">
          <li><a class="dropdown-item <%= 'active' if params[:sort] == 'name' %>" href="<%= package_usages_path(sort: 'name', order: 'asc') %>">Name</a></li>
          <li><a class="dropdown-item <%= 'active' if params[:sort].nil? || params[:sort] == 'packages_count' %>" href="<%= package_usages_path(sort: 'packages_count', order: 'desc') %>">Packages</a></li>
          <li><a class="dropdown-item <%= 'active' if params[:sort] == 'total_downloads' %>" href="<%= package_usages_path(sort: 'total_downloads', order: 'desc') %>">Downloads</a></li>
        </ul>
      </div>
    </li>
  </ul>

  <% @ecosystems.each do |ecosystem| %>
    <div class="card mb-3">
      <div class="card-body">
        <h5 class="card-title">
          <%= link_to ecosystem[:ecosystem], ecosystem_package_usages_path(ecosystem[:ecosystem]) %>
        </h5>
        
        <small class='text-muted'>
          <%= pluralize number_with_delimiter(ecosystem[:count]), 'package' %><br/>
          <%= pluralize number_with_delimiter(ecosystem[:downloads]), 'download' %> 
        </small>
      </div>
    </div>
  <% end %>
</div>